"use strict";(self["webpackChunkticktr_app"]=self["webpackChunkticktr_app"]||[]).push([[643],{9643:function(e,t,s){s.r(t),s.d(t,{default:function(){return P}});var a=s(3396),r=s(7139),l=s(9242);const i={class:"vh-animate vh-animate-fade-in vh-text-center"},o={class:"vh-card vh-card-body vh-card-default vh-card-small"},n={class:"vh-margin-top"},h=(0,a._)("small",{class:"axs-small"}," TICKET SERIES NO. ",-1),m={class:"axs-series-number vh-margin-small-top"},d={class:"vh-margin-medium-top"},u=(0,a._)("small",{class:"axs-small"}," TOTAL TICKETS ",-1),g={class:"axs-series-number vh-margin-small-top vh-margin-remove-bottom"},c={class:"vh-margin-top"},_={class:"vh-margin-medium-top"},p=(0,a._)("small",{class:"axs-small"}," LAST RELEASED TICKET NO. ",-1),v={class:"axs-release-number vh-margin-small-top"},f={key:0},k={key:1,class:"vh-text-italic"},N={class:"vh-margin-small-top"},w=(0,a._)("small",{class:"axs-small"}," NEXT TICKET NO. ",-1),b={class:"axs-release-number vh-margin-small-top"},y={class:"vh-margin-top"};function x(e,t,s,x,E,T){const z=(0,a.up)("vh-button"),S=(0,a.up)("form-modal");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",o,[(0,a._)("div",n,[h,(0,a._)("h2",m,(0,r.zw)(e.getNo("starting"))+" ~ "+(0,r.zw)(e.getNo("ending")),1)]),(0,a._)("div",d,[u,(0,a._)("h2",g,(0,r.zw)(e.getNo("total")),1)]),(0,a._)("div",c,[(0,a.Wm)(z,{type:"button",size:"small",color:"warning",onClick:t[0]||(t[0]=e=>T.toggleModal("form",!0))},{default:(0,a.w5)((()=>[(0,a.Uk)(" EDIT ")])),_:1})])]),(0,a._)("div",_,[p,(0,a._)("h3",v,[T.hasRelease?((0,a.wg)(),(0,a.iD)("span",f,(0,r.zw)(e.getNo("last_release")),1)):((0,a.wg)(),(0,a.iD)("span",k,"No released ticket yet"))])]),(0,a._)("div",N,[w,(0,a._)("h3",b,(0,r.zw)(T.nextRelease),1)]),(0,a._)("div",y,[T.hasRelease?((0,a.wg)(),(0,a.j4)(z,{key:0,class:"vh-inline vh-margin-small-right",type:"button",size:"small",color:"danger",outline:!0,onClick:t[1]||(t[1]=e=>T.undoRelease())},{default:(0,a.w5)((()=>[(0,a.Uk)(" UNDO "+(0,r.zw)(e.getNo("last_release")),1)])),_:1})):(0,a.kq)("",!0),(0,a.wy)((0,a.Wm)(z,{class:"vh-inline",type:"button",size:"small",color:"primary",onClick:t[2]||(t[2]=e=>T.release())},{default:(0,a.w5)((()=>[(0,a.Uk)(" RELEASE "+(0,r.zw)(T.nextRelease),1)])),_:1},512),[[l.F8,null==e.getNo("last_release")||parseInt(e.getNo("last_release"))<parseInt(e.getNo("ending"))]])]),(0,a.Wm)(S)])}var E=s(65),T=s(7443);const z={class:"vh-margin-top"},S=(0,a._)("h2",{class:"axs-title vh-margin-remove"}," Ticket Form ",-1),I=(0,a._)("p",{class:"axs-paragraph"}," Kindly fill-out required fields appropriately. ",-1),R={class:"vh-fieldset"},M={class:"vh-margin-top"},C=(0,a._)("label",{class:"axs-input-label"}," * Starting Series No. ",-1),O={key:0,class:"vh-text-danger vh-text-bold"},F={class:"vh-margin"},U=(0,a._)("label",{class:"axs-input-label"}," * Total Tickets ",-1),q={key:0,class:"vh-text-danger vh-text-bold"},D={class:"vh-margin-top vh-text-center"};function $(e,t,s,i,o,n){const h=(0,a.up)("vh-button"),m=(0,a.up)("vh-modal-body"),d=(0,a.up)("vh-modal");return(0,a.wg)(),(0,a.j4)(d,{isOpen:e.$parent.$data.formModal,isCenter:!0},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a._)("div",z,[S,I,(0,a._)("form",{class:"vh-form-stacked",onSubmit:t[3]||(t[3]=(0,l.iM)((e=>n.submit()),["prevent"]))},[(0,a._)("fieldset",R,[(0,a._)("div",M,[C,(0,a.wy)((0,a._)("input",{type:"number",class:"axs-input",required:"true",autofocus:"true","onUpdate:modelValue":t[0]||(t[0]=e=>o.form.starting_no=e)},null,512),[[l.nr,o.form.starting_no]]),n.hasError("starting_no")?((0,a.wg)(),(0,a.iD)("small",O,(0,r.zw)(o.errors.starting_no[0]),1)):(0,a.kq)("",!0)]),(0,a._)("div",F,[U,(0,a.wy)((0,a._)("input",{type:"number",class:"axs-input",required:"true","onUpdate:modelValue":t[1]||(t[1]=e=>o.form.total_no=e)},null,512),[[l.nr,o.form.total_no]]),n.hasError("total_no")?((0,a.wg)(),(0,a.iD)("small",q,(0,r.zw)(o.errors.total_no[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",D,[(0,a.Wm)(h,{class:"vh-margin-small-right",type:"button",size:"large",onClick:t[2]||(t[2]=e=>n.closeModal()),color:"default"},{default:(0,a.w5)((()=>[(0,a.Uk)(" CLOSE ")])),_:1}),(0,a.Wm)(h,{type:"submit",size:"large",color:"default"},{default:(0,a.w5)((()=>[(0,a.Uk)(" ðŸ’¾ SAVE ")])),_:1})])],32)])])),_:1})])),_:1},8,["isOpen"])}var L={data(){return{errors:{},form:{starting_no:1e5,ending_no:10099,total_no:100,last_release_no:null}}},created(){this.initialize()},computed:{...(0,E.Se)({getNo:"auth/getSeriesNo"}),selected(){return this.$parent.$data.selected},formModal(){return this.$parent.$data.formModal}},methods:{...(0,E.nv)({save:"auth/saveSeries"}),submit(){if(this.errors={},this.form.starting_no||(this.errors.starting_no=["ðŸ˜Œ Please fill this required field."]),this.form.total_no||(this.errors.total_no=["ðŸ˜Œ Please fill this required field."]),Object.keys(this.errors).length>0)return T.FN.error({message:"Oops, kindly double check your form."});this.form.ending_no=parseInt(this.form.starting_no)+parseInt(this.form.total_no),this.form.ending_no-=1,this.form.starting_no!=this.getNo("starting")&&(this.form.last_release_no=null),this.form.last_release_no>this.form.ending_no&&(this.form.last_release_no=null),this.save(this.form),this.closeModal()},initialize(){this.form.starting_no=this.getNo("starting"),this.form.ending_no=this.getNo("ending"),this.form.total_no=this.getNo("total"),this.form.last_release_no=this.getNo("last_release")},hasError(e=null){return T.l0.hasError(this.errors,e)},closeModal(){this.$parent.toggleModal("form",!1)}},watch:{formModal(){this.initialize()}}},W=s(89);const A=(0,W.Z)(L,[["render",$]]);var K=A,j={name:"Tickets",components:{FormModal:K},data(){return{selected:{},formModal:!1}},created(){this.initialize()},computed:{...(0,E.Se)({getNo:"auth/getSeriesNo",isSet:"auth/isSet"}),hasRelease(){return this.getNo("last_release")},nextRelease(){return this.hasRelease?parseInt(this.getNo("last_release"))+1:this.getNo("starting")},isTicketEnoughForRelease(){return parseInt(this.nextRelease)<=parseInt(this.getNo("ending"))},isTicketForUndo(){return this.hasRelease&&parseInt(this.getNo("last_release"))>=parseInt(this.getNo("starting"))}},methods:{...(0,E.nv)({update:"auth/updateLastRelease"}),async release(){this.isTicketEnoughForRelease?await this.update(this.nextRelease):T.FN.error({message:"Oops, ticket is not enough for releasing."})},async undoRelease(){this.isTicketForUndo?parseInt(this.getNo("last_release"))>parseInt(this.getNo("starting"))?await this.update(parseInt(this.getNo("last_release")-1)):await this.update(null):T.FN.error({message:"Oops, no released ticket yet."})},initialize(){this.isSet||this.toggleModal("form",!0)},toggleModal(e,t){this[`${e}Modal`]=t}}};const V=(0,W.Z)(j,[["render",x]]);var P=V}}]);
//# sourceMappingURL=643.8db72b26.js.map