"use strict";(self["webpackChunkticktr_app"]=self["webpackChunkticktr_app"]||[]).push([[235],{235:function(t,e,s){s.r(e),s.d(e,{default:function(){return F}});var a=s(3396),r=s(7139);const o={class:"vh-animate vh-animate-fade-in vh-text-center"},i={class:"vh-card vh-card-body vh-card-default vh-card-small"},n={class:"vh-margin-top"},l=(0,a._)("small",{class:"axs-small"}," TICKET SERIES NO. ",-1),h={class:"axs-series-number vh-margin-small-top"},m={class:"vh-margin-medium-top"},d=(0,a._)("small",{class:"axs-small"}," TOTAL TICKETS ",-1),g={class:"axs-series-number vh-margin-small-top vh-margin-remove-bottom"},u={class:"vh-margin-top"},c={class:"vh-margin-medium-top"},_=(0,a._)("small",{class:"axs-small"}," NEXT SERIES NO. ",-1),p={class:"axs-release-number vh-margin-small-top"},v={class:"vh-margin-top"};function f(t,e,s,f,S,N){const b=(0,a.up)("vh-button"),w=(0,a.up)("form-modal");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",i,[(0,a._)("div",n,[l,(0,a._)("h2",h,(0,r.zw)(t.getNo("starting"))+" ~ "+(0,r.zw)(t.getNo("ending")),1)]),(0,a._)("div",m,[d,(0,a._)("h2",g,(0,r.zw)(t.getNo("total")),1)]),(0,a._)("div",u,[(0,a.Wm)(b,{type:"button",size:"small",color:"warning",onClick:e[0]||(e[0]=t=>N.toggleModal("form",!0))},{default:(0,a.w5)((()=>[(0,a.Uk)(" EDIT ")])),_:1})])]),(0,a._)("div",c,[_,(0,a._)("h3",p,(0,r.zw)(N.nextStartingSeries)+" ~ "+(0,r.zw)(N.nextEndingSeries),1)]),(0,a._)("div",v,[(0,a.Wm)(b,{class:"vh-inline vh-margin-small-right",type:"button",size:"small",color:"danger",outline:!0,onClick:e[1]||(e[1]=t=>N.changeToPreviousSeries())},{default:(0,a.w5)((()=>[(0,a.Uk)(" PREVIOUS SERIES ")])),_:1}),(0,a.Wm)(b,{class:"vh-inline",type:"button",size:"small",color:"primary",onClick:e[2]||(e[2]=t=>N.changeToNextSeries())},{default:(0,a.w5)((()=>[(0,a.Uk)(" NEXT SERIES ")])),_:1})]),(0,a.Wm)(w)])}var S=s(65),N=s(7443),b=s(9242);const w={class:"vh-margin-top"},k=(0,a._)("h2",{class:"axs-title vh-margin-remove"}," Ticket Form ",-1),x=(0,a._)("p",{class:"axs-paragraph"}," Kindly fill-out required fields appropriately. ",-1),E={class:"vh-fieldset"},y={class:"vh-margin-top"},I=(0,a._)("label",{class:"axs-input-label"}," * Starting Series No. ",-1),z={key:0,class:"vh-text-danger vh-text-bold"},T={class:"vh-margin"},M=(0,a._)("label",{class:"axs-input-label"}," * Total Tickets ",-1),C={key:0,class:"vh-text-danger vh-text-bold"},O={class:"vh-margin-top vh-text-center"};function U(t,e,s,o,i,n){const l=(0,a.up)("vh-button"),h=(0,a.up)("vh-modal-body"),m=(0,a.up)("vh-modal");return(0,a.wg)(),(0,a.j4)(m,{isOpen:t.$parent.$data.formModal,isCenter:!0},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a._)("div",w,[k,x,(0,a._)("form",{class:"vh-form-stacked",onSubmit:e[3]||(e[3]=(0,b.iM)((t=>n.submit()),["prevent"]))},[(0,a._)("fieldset",E,[(0,a._)("div",y,[I,(0,a.wy)((0,a._)("input",{type:"number",class:"axs-input",required:"true",autofocus:"true","onUpdate:modelValue":e[0]||(e[0]=t=>i.form.starting_no=t)},null,512),[[b.nr,i.form.starting_no]]),n.hasError("starting_no")?((0,a.wg)(),(0,a.iD)("small",z,(0,r.zw)(i.errors.starting_no[0]),1)):(0,a.kq)("",!0)]),(0,a._)("div",T,[M,(0,a.wy)((0,a._)("input",{type:"number",class:"axs-input",required:"true","onUpdate:modelValue":e[1]||(e[1]=t=>i.form.total_no=t)},null,512),[[b.nr,i.form.total_no]]),n.hasError("total_no")?((0,a.wg)(),(0,a.iD)("small",C,(0,r.zw)(i.errors.total_no[0]),1)):(0,a.kq)("",!0)])]),(0,a._)("div",O,[(0,a.Wm)(l,{class:"vh-margin-small-right",type:"button",size:"large",onClick:e[2]||(e[2]=t=>n.closeModal()),color:"default"},{default:(0,a.w5)((()=>[(0,a.Uk)(" CLOSE ")])),_:1}),(0,a.Wm)(l,{type:"submit",size:"large",color:"default"},{default:(0,a.w5)((()=>[(0,a.Uk)(" ðŸ’¾ SAVE ")])),_:1})])],32)])])),_:1})])),_:1},8,["isOpen"])}var $={data(){return{errors:{},form:{starting_no:1e5,ending_no:10099,total_no:100,last_release_no:null}}},created(){this.initialize()},computed:{...(0,S.Se)({getNo:"auth/getSeriesNo"}),selected(){return this.$parent.$data.selected},formModal(){return this.$parent.$data.formModal}},methods:{...(0,S.nv)({save:"auth/saveSeries"}),submit(){if(this.errors={},this.form.starting_no||(this.errors.starting_no=["ðŸ˜Œ Please fill this required field."]),this.form.total_no||(this.errors.total_no=["ðŸ˜Œ Please fill this required field."]),Object.keys(this.errors).length>0)return N.FN.error({message:"Oops, kindly double check your form."});this.form.ending_no=parseInt(this.form.starting_no)+parseInt(this.form.total_no),this.form.ending_no-=1,this.form.starting_no!=this.getNo("starting")&&(this.form.last_release_no=null),this.form.last_release_no>this.form.ending_no&&(this.form.last_release_no=null),this.save(this.form),this.closeModal()},initialize(){this.form.starting_no=this.getNo("starting"),this.form.ending_no=this.getNo("ending"),this.form.total_no=this.getNo("total"),this.form.last_release_no=this.getNo("last_release")},hasError(t=null){return N.l0.hasError(this.errors,t)},closeModal(){this.$parent.toggleModal("form",!1)}},watch:{formModal(){this.initialize()}}},q=s(89);const W=(0,q.Z)($,[["render",U]]);var R=W,P={name:"Tickets",components:{FormModal:R},data(){return{selected:{},formModal:!1}},created(){this.initialize()},computed:{...(0,S.Se)({getNo:"auth/getSeriesNo",isSet:"auth/isSet"}),nextStartingSeries(){return parseInt(this.getNo("ending"))+1},nextEndingSeries(){return parseInt(this.nextStartingSeries)+parseInt(this.getNo("total"))-1}},methods:{...(0,S.nv)({update:"auth/updateLastRelease",save:"auth/saveSeries"}),async changeToNextSeries(){let t=parseInt(this.getNo("ending"))+1,e=t+parseInt(this.getNo("total"))-1,s=parseInt(this.getNo("total"));await this.save({starting_no:t,ending_no:e,total_no:s,last_release_no:null})},async changeToPreviousSeries(){let t=parseInt(this.getNo("starting"))-1,e=t-parseInt(this.getNo("total"))+1,s=parseInt(this.getNo("total"));if(e>0)return await this.save({starting_no:e,ending_no:t,total_no:s,last_release_no:null});N.FN.error({message:"Oops, Starting Series No. will be out of value."})},initialize(){this.isSet||this.toggleModal("form",!0)},toggleModal(t,e){this[`${t}Modal`]=e}}};const D=(0,q.Z)(P,[["render",f]]);var F=D}}]);
//# sourceMappingURL=235.94b0c487.js.map